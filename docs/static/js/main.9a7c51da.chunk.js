(this["webpackJsonpwallet-interop-transmute-world"]=this["webpackJsonpwallet-interop-transmute-world"]||[]).push([[0],{154:function(e,t){},194:function(e,t){},348:function(e,t){},353:function(e,t){},354:function(e,t){},358:function(e,t){},475:function(e,t){},599:function(e,t,a){e.exports=a.p+"static/media/logo.786ba058.svg"},603:function(e,t,a){e.exports=a.p+"static/media/key.7d03fa36.svg"},604:function(e,t,a){e.exports=a.p+"static/media/transmute-loading-white.11fb6556.gif"},620:function(e,t,a){e.exports=a(845)},625:function(e,t,a){},654:function(e,t){},655:function(e,t){},673:function(e,t){},674:function(e,t){},678:function(e,t){},680:function(e,t){},690:function(e,t){},692:function(e,t){},717:function(e,t){},718:function(e,t){},723:function(e,t){},725:function(e,t){},732:function(e,t){},751:function(e,t){},784:function(e,t,a){e.exports=a.p+"static/media/logo-transmute.e81c37a9.svg"},845:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setKeystoreProp",(function(){return K}));var r={};a.r(r),a.d(r,"setChapiProp",(function(){return Z}));var o={};a.r(o),a.d(o,"setTmuiProp",(function(){return ee}));var i=a(0),l=a.n(i),c=a(21),s=a.n(c),u=(a(625),a(288)),d=a(232),p=a(72),m=a(586),f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var h=a(26),b=a(39),g=a(410),v=a(544),E=a(587),k=a.n(E),O=a(588),w=a(589),j=a(590),C=a.n(j),x=a(101),S=Object(x.a)(),P=a(42),D=a(904),T=a(907),K=Object(T.a)("keystore/SET_TMUI_PROP",(function(e){return e})),W=Object(h.a)({},{apiRoot:"https://did-edv.web.app/edvs"}),N=Object(D.a)(Object(P.a)({},K,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),a)})),W),A=a(71),R=Object(p.c)((function(e){return{keystore:e.keystore}}),Object(h.a)({},n)),F=a(6),L=a.n(F),I=a(9),z=a(227),M=a(592),B=a.n(M),q=a(239),J=a.n(q),H=B.a.driver().keyToDidDoc,V=Object(A.b)({doImportKeystore:function(e){var t=e.setKeystoreProp;return function(){var e=Object(I.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({keystore:{data:a}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},doCreateWalletKeystore:function(e){var t=e.setKeystoreProp;return Object(I.a)(L.a.mark((function e(){var a,n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Ed25519KeyPair.generate();case 2:a=e.sent,n=H(a),r=J.a.create({keys:[{type:"assymetric",encoding:"base58",didPublicKeyEncoding:"publicKeyBase58",publicKey:a.publicKeyBase58,privateKey:a.privateKeyBase58,tags:["Ed25519VerificationKey2018",n.publicKey[0].id,"web"],notes:""}]}),t({keystore:{data:{keys:r.keys}}});case 6:case"end":return e.stop()}}),e)})))},doUpdateKeystore:function(e){var t=e.setKeystoreProp;return function(){var e=Object(I.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=J.a.create({keys:Object.values(JSON.parse(a))}),t({keystore:{data:{keys:n.keys}}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},doDeleteKeystore:function(e){var t=e.setKeystoreProp;return Object(I.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({keystore:null});case 1:case"end":return e.stop()}}),e)})))},doToggleKeystore:function(e){var t=e.keystore,a=e.setKeystoreProp;return function(){var e=Object(I.a)(L.a.mark((function e(n){var r,o,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({loading:!0});try{"string"===typeof t.keystore.data?((o=J.a.create(t.keystore.data)).unlock(n),a({keystore:{data:{keys:o.keys}}}),r="Unlocked keystore."):((i=J.a.create({keys:Object.values(t.keystore.data.keys)})).lock(n),a({keystore:{data:i.ciphered}}),r="Locked keystore."),console.log(r)}catch(l){console.error(l)}a({loading:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),_={reducer:N,container:Object(A.a)(R,V)},Z=Object(T.a)("chapi/SET_CHAPI_PROP",(function(e){return e})),U=Object(D.a)(Object(P.a)({},Z,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),a)})),{wallet:{isLoaded:!1,rows:[],object:{}}}),G=Object(p.c)((function(e){return{chapi:e.chapi}}),Object(h.a)({},r)),Y=a(906),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e)},Q=Object(A.a)(Object(A.b)({walletObjectToArray:function(){return X},loadWalletContents:function(e){var t=e.setChapiProp;return function(){var e=localStorage.getItem("walletContents");e?(e=JSON.parse(atob(e)),t({wallet:{isLoaded:!0,object:e}})):t({wallet:{isLoaded:!0}})}}}),Object(A.b)({storeInWallet:function(e){var t=e.chapi,a=e.loadWalletContents;return function(e){var n=t.wallet.object||{},r=e;e.verifiableCredential&&(r=Array.isArray(e.verifiableCredential)?e.verifiableCredential[0]:e.verifiableCredential),n[r.id||"urn:uuid:".concat(Object(Y.a)())]=r;var o=btoa(JSON.stringify(n));localStorage.setItem("walletContents",o),a()}}})),$={reducer:U,container:Object(A.a)(G,Q)},ee=Object(T.a)("tmui/SET_TMUI_PROP",(function(e){return e})),te=Object(D.a)(Object(P.a)({},ee,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),a)})),{isPrimaryDrawerOpen:!1,isSpeedDialogOpen:!1,activeTabIndex:0,currentRole:{label:"Tier 0",value:"tier0"}}),ae=Object(p.c)((function(e){return{tmui:e.tmui}}),Object(h.a)({},o)),ne=Object(A.b)({setTmuiProp:function(e){var t=e.setTmuiProp;return function(e){t(e)}},doToggleSpeedDial:function(e){var t=e.setTmuiProp;return function(e){t({isSpeedDialogOpen:e})}},doSelectActiveTab:function(e){var t=e.setTmuiProp;return function(e){t({activeTabIndex:e})}},doFabClick:function(e){var t=e.setTmuiProp;return function(e){t({fabClick:e})}}}),re={reducer:te,container:Object(A.a)(ae,ne)},oe={router:Object(d.b)(S),keystore:_.reducer,chapi:$.reducer,tmui:re.reducer},ie=a(605),le=a(606),ce=a(16),se=a(18),ue=a(52),de=a(51),pe=a(170),me=a(874),fe=a(110),ye='"Rajdhani"',he='"Roboto Condensed"',be='"Lato"',ge=function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(se.a)(a,[{key:"render",value:function(){var e=this.props.children,t=Object(pe.a)({splashImage:"",palette:{type:"light",primary:{light:Object(fe.lighten)("#161616",.07),main:"#161616",dark:Object(fe.darken)("#161616",.07)},secondary:{light:Object(fe.lighten)("#fcb373",.07),main:"#fcb373",dark:Object(fe.darken)("#fcb373",.07)}},typography:{useNextVariants:!0,fontSize:16,fontFamily:[ye,he,be].join(","),h1:{fontFamily:ye,fontWeight:600},h2:{fontFamily:ye,fontWeight:600},h3:{fontFamily:ye,fontWeight:600},h4:{fontFamily:he,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},h5:{fontFamily:he,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},h6:{fontFamily:he,textTransform:"uppercase",letterSpacing:"0.1em",fontWeight:400},subtitle1:{fontFamily:ye,fontWeight:400},subtitle2:{fontFamily:he,fontWeight:400},body1:{fontFamily:be,fontWeight:400},body2:{fontFamily:be,fontWeight:400},button:{fontFamily:he,fontWeight:400},caption:{fontFamily:he,fontWeight:400},overline:{fontFamily:he,letterSpacing:"0.15em",textTransform:"uppercase",fontWeight:300}},overrides:{MuiInput:{input:{fontFamily:be}},MuiInputLabel:{root:{fontFamily:he}},MuiAppBar:{root:{}},MuiButton:{contained:{boxShadow:"none"}}}});return l.a.createElement(me.a,{theme:t},e)}}]),a}(i.Component),ve=a(876),Ee=a(309),ke=a(2),Oe=a(595),we=a.n(Oe),je=a(597),Ce=a.n(je),xe=a(408),Se=a.n(xe),Pe=a(598),De=a.n(Pe),Te=a(177),Ke=a(547),We=a(296),Ne=a(848),Ae=a(596),Re=a.n(Ae),Fe=a(546),Le={success:we.a,warning:Re.a,error:Ce.a,info:Se.a,default:Se.a},Ie=Object(Fe.a)((function(e){return{success:{backgroundColor:Te.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Ke.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));var ze=function(e){var t=Ie(),a=e.className,n=e.message,r=e.onClose,o=e.variant,i=Object(Ee.a)(e,["className","message","onClose","variant"]),c=Le[o];return l.a.createElement(Ne.a,Object.assign({className:Object(ke.a)(t[o],a),"aria-describedby":"client-snackbar",message:l.a.createElement("span",{id:"client-snackbar",className:t.message},l.a.createElement(c,{className:Object(ke.a)(t.icon,t.iconVariant)}),n),action:[l.a.createElement(We.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},l.a.createElement(De.a,{className:t.icon}))]},i))};var Me=function(e){var t=e.tmui.snackBarMessage||{variant:"default",vertical:"bottom",horizontal:"right"},a=t.open,n=t.variant,r=t.message,o=t.autoHideDuration,i=t.vertical,c=t.horizontal,s=function(t,a){"clickaway"!==a&&e.setTmuiProp({snackBarMessage:Object(h.a)(Object(h.a)({},e.tmui.snackBarMessage),{},{open:!1})})};return l.a.createElement("div",null,l.a.createElement(ve.a,{anchorOrigin:{vertical:i,horizontal:c},open:a,autoHideDuration:o,onClose:s},l.a.createElement(ze,{onClose:s,variant:n,message:r})))},Be=a(44),qe=a(880),Je=a(879),He=a(549),Ve=a(74),_e=a(25),Ze=a(878),Ue=a(548),Ge=a(286),Ye=(a(784),Object(Fe.a)((function(e){var t;return{root:{},grow:{flexGrow:1},drawer:Object(P.a)({},e.breakpoints.up("sm"),{width:0,flexShrink:0}),appBar:Object(P.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(0,"px)"),marginLeft:0}),menuButton:Object(P.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:0},sectionDesktop:Object(P.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(P.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),content:(t={},Object(P.a)(t,e.breakpoints.up("sm"),{marginLeft:0}),Object(P.a)(t,"flexGrow",1),Object(P.a)(t,"padding",e.spacing(3)),t)}})));var Xe=function(e){e.container;var t=Ye(),a=(Object(_e.a)(),l.a.useState(!1)),n=Object(Be.a)(a,2),r=(n[0],n[1],l.a.useState(null)),o=Object(Be.a)(r,2),i=o[0],c=(o[1],l.a.useState(null)),s=Object(Be.a)(c,2),u=s[0];s[1],Boolean(i),Boolean(u);return Ge.a,e.rightHandAccountMenu.map((function(e){return e.displaySmUp?"":l.a.createElement(Ue.a,{key:e.label,onClick:e.onClick},e.label)})),Ge.a,e.rightHandAccountMenu.map((function(e){return l.a.createElement(Ue.a,{key:e.label,onClick:e.onClick},l.a.createElement(We.a,{"aria-label":e.ariaLabel,color:"inherit"},l.a.createElement(Ze.a,{badgeContent:e.badgeContent,color:"secondary"},e.icon)),l.a.createElement("p",null,e.label))})),l.a.createElement("div",{className:t.root},l.a.createElement(Je.a,null),l.a.createElement(qe.a,{position:"fixed",className:t.appBar},l.a.createElement(He.a,null,e.headerImage?l.a.createElement("img",{src:e.headerImage,alt:e.headerText,className:t.title,style:{height:"28px"}}):l.a.createElement(Ve.a,{className:t.title,variant:"h6",noWrap:!0},e.headerText),l.a.createElement("div",{className:t.grow}))),l.a.createElement("main",{className:t.content},l.a.createElement("div",{className:t.toolbar}),l.a.createElement("div",{style:{maxWidth:"100%"}},e.content)))},Qe=a(854),$e=a(881),et=a(550),tt=a(853),at=a(299),nt=a.n(at),rt=a(298),ot=a.n(rt),it=[{label:"Home",icon:l.a.createElement(ot.a,null),showForRoles:["tier0","tier1","tier2"],onClick:function(){S.push("/")}},{label:"Source Code",icon:l.a.createElement(nt.a,null),showForRoles:["tier0","tier1","tier2"],onClick:function(){window.open("https://github.com/transmute-industries/wallet.interop.transmute.world","_blank")}}];var lt=function(e){var t=e.tmui,a=(e.setTmuiProp,l.a.useState({currentRole:t.currentRole})),n=Object(Be.a)(a,1)[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement(tt.a,null,it.filter((function(e){return-1!==e.showForRoles.indexOf(n.currentRole.value)})).map((function(e){return l.a.createElement(Qe.a,{button:!0,key:e.label,onClick:e.onClick},l.a.createElement($e.a,null,e.icon),l.a.createElement(et.a,{primary:e.label}))}))))},ct=[{badgeContent:0,ariaLabel:"home",icon:l.a.createElement(ot.a,null),label:"Home",onClick:function(){S.push("/")}},{badgeContent:0,label:"Source Code",ariaLabel:"source",icon:l.a.createElement(nt.a,null),onClick:function(){window.open("https://github.com/transmute-industries/wallet.interop.transmute.world","_blank")}}],st=a(599),ut=a.n(st),dt=function(e){var t=e.tmui,a=e.setTmuiProp,n=e.children;return l.a.useEffect((function(){window.__chapi__run__once||Object(I.a)(L.a.mark((function e(){var t,a,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.a();case 3:return t=window.origin,a="".concat(t,"/worker.html"),e.next=7,le.a({url:a});case 7:return n=e.sent,e.next=10,n.credentialManager.hints.set("test",{name:"TestUser",enabledTypes:["VerifiablePresentation","VerifiableCredential","UniversityDegreeCredential"]});case 10:console.log("Wallet registered."),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error in loadOnce:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))(),window.__chapi__run__once=!0})),l.a.createElement(ge,null,l.a.createElement(Xe,{rightHandAccountMenu:ct,headerImage:ut.a,drawer:l.a.createElement(lt,{tmui:t,setTmuiProp:a}),content:n}),l.a.createElement(Me,{tmui:t,setTmuiProp:a}))},pt=a(393),mt=a.n(pt),ft=a(562),yt=a(114),ht=a.n(yt),bt=a(905),gt=a(888),vt=a(387),Et=(a(283),a(307)),kt=a.n(Et),Ot=(a(576),a(577),function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(se.a)(a,[{key:"render",value:function(){var e=this.props,t=e.jsonObject,a=e.onChange;return l.a.createElement(kt.a,{mode:"json",theme:"github",style:Object(h.a)(Object(h.a)({},this.props.style),{},{width:"100%"}),onChange:function(e){a(e)},readOnly:void 0===a,wrapEnabled:!0,name:"JSONEditorEditor",value:JSON.stringify(t,null,2),editorProps:{$blockScrolling:!0}})}}]),a}(i.Component)),wt=a(289),jt=a(602),Ct=a.n(jt),xt=a(886),St=a(567),Pt=a(896),Dt=a(898),Tt=a(897),Kt=a(128),Wt=a.n(Kt),Nt=["image","type"],At=["credentialSubject","type","@context","proof"],Rt=["issuanceDate","expirationDate"],Ft=Object(Fe.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}}));function Lt(e){var t,a=e.verifiableCredential,n=!1,r=Object(i.useState)([]),o=Object(Be.a)(r,2),c=o[0],s=o[1],u=Object(i.useState)(!0),d=Object(Be.a)(u,2),p=d[0],m=d[1],f=a.proof,y=!1;Array.isArray(f)&&(y=f.some((function(e){return"CAdESRSASignature2020"===e.type})));var h=Ft(),b=l.a.useState("panel1"),g=Object(Be.a)(b,2),v=g[0],E=g[1],k=function(e,t){var a=e.toString();return"true"===a?l.a.createElement("span",{style:{borderRadius:"4px",padding:"4px",backgroundColor:"#d32f2f",color:"#fff"}},"Positive"):"false"===a?l.a.createElement("span",{style:{borderRadius:"4px",padding:"4px",backgroundColor:"#7cb342"}},"Negative"):-1!==Rt.indexOf(t)?Ct()(a).fromNow():("object"===typeof e&&e.id&&(a=e.id),l.a.createElement("span",{style:{wordBreak:"break-all",paddingLeft:"16px"}},a.slice(0,64)))},O=(null===(t=a.credentialSubject)||void 0===t?void 0:t.cmtr)?a.credentialSubject.cmtr:a.credentialSubject;Object(i.useEffect)((function(){return j(),function(){n=!0}}),[]);var w,j=function(){var e=Object(I.a)(L.a.mark((function e(){var t,r,o,i,l,c,u,d,p,f;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||m(!0),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch("".concat("https://dev.vidchain.net","/eidas-bridge/v1/signature-validations"),t);case 4:return r=e.sent,e.next=7,r.json();case 7:if(o=e.sent,i=[],e.prev=9,200!=r.status||"TOTAL_PASSED"!==o.indication){e.next=32;break}l=o.reports[0].SimpleReport.signatureOrTimestamp[0].Signature.CertificateChain.Certificate,c=Object(wt.a)(l.entries()),e.prev=13,c.s();case 15:if((u=c.n()).done){e.next=24;break}if(d=Object(Be.a)(u.value,2),p=d[0],f=d[1],3!==p){e.next=19;break}return e.abrupt("break",24);case 19:if(!(!0&p)){e.next=21;break}return e.abrupt("continue",22);case 21:i.push(f);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),c.e(e.t0);case 29:return e.prev=29,c.f(),e.finish(29);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(9),console.log(e.t1);case 37:return e.prev=37,n||(m(!1),s(i)),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[9,34,37,40],[13,26,29,32]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(vt.a,null,y?l.a.createElement(Pt.a,null,l.a.createElement(Dt.a,{expandIcon:l.a.createElement(Wt.a,null),"aria-controls":"panel1a-content",id:"paneleidas-header"},l.a.createElement(vt.a,{display:"flex"},l.a.createElement("img",{height:"25",src:"/eidas.png"}),l.a.createElement(Ve.a,{style:{padding:"0 16px"},className:h.heading},"eIDAS Compliant Credential"))),l.a.createElement(Tt.a,null,l.a.createElement(vt.a,{style:{padding:"0 16px"},flexGrow:1},p?l.a.createElement(St.a,null):null,c.map((function(e,t){return l.a.createElement(vt.a,{display:"flex",p:1,key:t,style:{fontSize:".8em",borderBottom:"1px solid #000",marginBottom:"8px"}},l.a.createElement(vt.a,{flexGrow:1},l.a.createElement("span",{style:{fontWeight:700}},function(e){switch(e){case 0:return l.a.createElement("span",{style:{fontWeight:700}},"Qualified Electronic seal generated by:");case 1:return l.a.createElement("span",{style:{fontWeight:700}},"Qualified Electronic Certificated issued by:");default:return l.a.createElement("span",{style:{fontWeight:700}})}}(t))),l.a.createElement(vt.a,null,l.a.createElement("span",{style:{wordBreak:"break-all",paddingLeft:"16px"}},e.qualifiedName)))}))))):null,l.a.createElement(Pt.a,null,l.a.createElement(Dt.a,{expandIcon:l.a.createElement(Wt.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(Ve.a,{className:h.heading},"Credential")),l.a.createElement(Tt.a,null,l.a.createElement(vt.a,{style:{padding:"0 16px"},flexGrow:1},Object.keys(a).map((function(e){if(-1===At.indexOf(e))return l.a.createElement(vt.a,{display:"flex",p:1,key:e,style:{fontSize:".8em",borderBottom:"1px solid #000",marginBottom:"8px"}},l.a.createElement(vt.a,{flexGrow:1},l.a.createElement("span",{style:{fontWeight:700}},e)),l.a.createElement(vt.a,null,k(a[e],e)))}))))),l.a.createElement(Pt.a,{expanded:"panel1"===v,onChange:(w="panel1",function(e,t){E(!!t&&w)})},l.a.createElement(Dt.a,{expandIcon:l.a.createElement(Wt.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},l.a.createElement(Ve.a,{className:h.heading},"Subject")),l.a.createElement(Tt.a,null,l.a.createElement(xt.a,{container:!0},a.credentialSubject.image&&l.a.createElement(xt.a,{item:!0,xs:12,lg:4},l.a.createElement(vt.a,null,l.a.createElement("img",{src:a.credentialSubject.image}))),l.a.createElement(xt.a,{item:!0,xs:12,lg:a.credentialSubject.image?8:12},Object.keys(O).map((function(e){if(-1===Nt.indexOf(e)&&"object"!==typeof O[e])return l.a.createElement(vt.a,{display:"flex",p:1,key:e,style:{fontSize:".8em",borderBottom:"1px solid #000",marginBottom:"8px"}},l.a.createElement(vt.a,{flexGrow:1},l.a.createElement("span",{style:{fontWeight:700}},e)),l.a.createElement(vt.a,null,k(O[e])))})))))))}function It(e){var t=e.children,a=e.value,n=e.index,r=Object(Ee.a)(e,["children","value","index"]);return l.a.createElement(Ve.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),a===n&&l.a.createElement(vt.a,{p:3},t))}function zt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Mt=Object(Fe.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#bdbdbd"}}}));function Bt(e){var t=e.verifiableCredential,a=Mt(),n=l.a.useState(0),r=Object(Be.a)(n,2),o=r[0],i=r[1];return l.a.createElement("div",{className:a.root},l.a.createElement(qe.a,{position:"static",color:"primary"},l.a.createElement(bt.a,{value:o,onChange:function(e,t){i(t)},"aria-label":"VC Tabs"},l.a.createElement(gt.a,Object.assign({label:"Preview"},zt(0))),l.a.createElement(gt.a,Object.assign({label:"Source"},zt(1))))),l.a.createElement(It,{value:o,index:0},l.a.createElement(Lt,{verifiableCredential:t})),l.a.createElement(It,{value:o,index:1},l.a.createElement(Ot,{jsonObject:t})))}var qt=function(e){var t=[];e.onShare&&t.push({icon:function(){return l.a.createElement(ft.a,{component:"div",variant:"contained",color:"primary"},"Share")},onClick:function(t,a){var n=Object(h.a)({},a);delete n.tableData,e.onShare(n)}});var a,n=e.credentialRequestOptions,r=[];if(n){var o="";"DIDAuth"===(a=Array.isArray(n.web.VerifiablePresentation.query)?n.web.VerifiablePresentation.query[0]:n.web.VerifiablePresentation.query).type&&(o="VerifiablePresentation"),a.credentialQuery&&(o=Array.isArray(a.credentialQuery.example.type)?a.credentialQuery.example.type[0]:a.credentialQuery.example.type),r.push({title:"Type",field:"type",render:function(e){return"string"===typeof e.type?ht.a.startCase(e.type):(console.log(e.type),2===e.type.length?ht.a.startCase(e.type[1]):e.type.map(ht.a.startCase).join(", "))},defaultFilter:o,customFilterAndSearch:function(e,t){return Array.isArray(t.type)?-1!==t.type.indexOf(e):t.type===e}}),"DIDAuth"===a.type&&r.push({title:"Challenge",field:"challenge",render:function(e){return e.proof.challenge},defaultFilter:n.web.VerifiablePresentation.challenge,customFilterAndSearch:function(e,t){return t.proof.challenge===e}})}else r.push({title:"Type",field:"type",render:function(e){return"string"===typeof e.type?ht.a.startCase(e.type):2===e.type.length?ht.a.startCase(e.type[1]):e.type.map(ht.a.startCase).join(", ")},customFilterAndSearch:function(e,t){return Array.isArray(t.type)?-1!==t.type.indexOf(e):t.type===e}});return l.a.createElement(mt.a,{title:e.title||"Options",columns:r,actions:t,data:e.walletRows||[],options:{filtering:!0,search:!0,pageSize:3,actionsColumnIndex:-1},detailPanel:function(e){var t=Object(h.a)({},e);if(delete t.tableData,"VerifiablePresentation"!==t.type)return l.a.createElement(Bt,{verifiableCredential:t})}})},Jt=a(398),Ht=a(401);var Vt=function(){var e=localStorage.getItem("holder");e||(e="did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd",localStorage.setItem("holder",e));var t=l.a.useState({holder:e}),a=Object(Be.a)(t,2),n=a[0],r=a[1];return l.a.createElement("div",{style:{marginBottom:"16px"}},l.a.createElement(Jt.a,{id:"holder-label"},"Holder"),l.a.createElement(Ht.a,{labelId:"holder-label",value:n.holder,onChange:function(e){r({holder:e.target.value}),localStorage.setItem("holder",e.target.value)}},l.a.createElement(Ue.a,{value:"did:web:vc.transmute.world"},"did:web:vc.transmute.world"),l.a.createElement(Ue.a,{value:"did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd"},"did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd"),l.a.createElement(Ue.a,{value:"did:elem:ropsten:EiBJJPdo-ONF0jxqt8mZYEj9Z7FbdC87m2xvN0_HAbcoEg"},"did:elem:ropsten:EiBJJPdo-ONF0jxqt8mZYEj9Z7FbdC87m2xvN0_HAbcoEg"),l.a.createElement(Ue.a,{value:"did:v1:test:nym:z6MkhdmzFu659ZJ4XKj31vtEDmjvsi5yDZG5L7Caz63oP39k"},"did:v1:test:nym:z6MkhdmzFu659ZJ4XKj31vtEDmjvsi5yDZG5L7Caz63oP39k")),l.a.createElement(ft.a,{variant:"contained",color:"secondary",style:{float:"right"},onClick:function(){localStorage.removeItem("walletContents"),window.location.reload()}},"Delete Wallet Contents"))},_t=window.credentialHandlerPolyfill,Zt=function(e){var t=e.tmui,a=e.setTmuiProp;return l.a.useEffect((function(){_t.loadOnce().then((function(){e.chapi.wallet.isLoaded||e.loadWalletContents()}))}),[]),l.a.createElement(dt,{tmui:t,setTmuiProp:a},l.a.createElement(Vt,null),l.a.createElement(qt,{title:"Wallet",walletRows:e.walletObjectToArray(e.chapi.wallet.object)}))},Ut=Object(b.compose)($.container,re.container)((function(e){return l.a.createElement(Zt,e)})),Gt=a(889),Yt=a(582),Xt=a(908),Qt=a(892),$t=a(893),ea=a(891),ta=a(890),aa=a(862),na=a(176),ra=a(174),oa=a(400),ia=a.n(oa),la=a(409),ca=a(899),sa=a(900),ua=a(901),da=a(902),pa=a(903),ma=a(4);var fa=Object(ma.a)((function(e){return{root:{width:"100%",marginBottom:"4px"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular,wordBreak:"break-all"},panel:{backgroundColor:Te.a[200]}}}))((function(e){var t=e.classes,a=e.panels;return l.a.createElement("div",{className:t.root},a&&a.map((function(e){return l.a.createElement(Pt.a,{disabled:e.disabled,key:e.title,className:t.panel},l.a.createElement(Dt.a,{expandIcon:l.a.createElement(Wt.a,null)},l.a.createElement(Ve.a,{className:t.heading},e.title)),l.a.createElement(Tt.a,null,e.children))})))})),ya=a(603),ha=a.n(ya),ba=Object(Fe.a)((function(e){return{card:{maxWidth:512},media:{height:0,backgroundSize:"contain",paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function ga(e){switch(e.status){case"empty":return l.a.createElement(ca.a,null);case"create":return l.a.createElement(sa.a,null);case"locked":return l.a.createElement(ua.a,null);case"unlocked":default:return l.a.createElement(da.a,null)}}function va(e){switch(e.status){case"empty":case"locked":return na.a[500];case"unlocked":default:return ra.a[500]}}function Ea(e){var t=e.status,a=e.title,n=e.subheader,r=e.keystore,o=e.doImportKeystore,i=e.doDeleteKeystore,c=e.doCreateWalletKeystore,s=e.onOpenKeystoreLockDialog,u=e.onOpenKeystoreEditDialog,d=ba(),p=l.a.useState(!1),m=Object(Be.a)(p,2),f=m[0],y=m[1],h=l.a.useState(null),b=Object(Be.a)(h,2),g=b[0],v=b[1],E=function(){v(null)};return l.a.createElement(Gt.a,{className:d.card},l.a.createElement("input",{style:{display:"none"},id:"keystore-file-input",multiple:!0,onChange:function(e){Object.keys(e.target.files).map((function(t){var a=e.target.files[t],n=new FileReader;return n.onload=function(e){o(e.target.result)},n.readAsText(a)}))},type:"file"}),l.a.createElement(Qt.a,{avatar:l.a.createElement(Xt.a,{"aria-label":"recipe",style:{backgroundColor:va({status:t})}},l.a.createElement(ga,{status:t})),title:a,action:l.a.createElement(l.a.Fragment,null,"empty"===t?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(We.a,{"aria-label":"settings","aria-controls":"simple-menu","aria-haspopup":"true",variant:"contained",onClick:function(e){v(e.currentTarget)}},l.a.createElement(ia.a,null)),l.a.createElement(Ge.a,{id:"simple-menu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:E},l.a.createElement(Ue.a,{onClick:function(){i(),E()}},"Delete"),"unlocked"===t&&l.a.createElement(Ue.a,{onClick:function(){u(),E()}},"Edit"),l.a.createElement(Ue.a,{onClick:function(){s(),E()}},"locked"===t?"Unlock":"Lock"))))}),"empty"!==t&&l.a.createElement($t.a,{className:d.media,image:ha.a,title:"Keystore"}),l.a.createElement(ea.a,null,l.a.createElement(Ve.a,{variant:"body2",color:"textSecondary",component:"p"},n)),"empty"===t&&l.a.createElement(ta.a,null,l.a.createElement(ft.a,{"aria-label":"import",onClick:function(){document.getElementById("keystore-file-input").click()},endIcon:l.a.createElement(ga,{status:t})},"Import"),l.a.createElement(ft.a,{onClick:function(){c()},endIcon:l.a.createElement(ga,{status:"create"})},"Create")),"empty"!==t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ta.a,{disableSpacing:!0},"locked"===t&&l.a.createElement(We.a,{"aria-label":"Export Keystore",onClick:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("keystore.txt",r.data)}},l.a.createElement(pa.a,null)),"unlocked"===t&&l.a.createElement(We.a,{className:Object(ke.a)(d.expand,Object(P.a)({},d.expandOpen,f)),onClick:function(){y(!f)},"aria-expanded":f,"aria-label":"show more"},l.a.createElement(Wt.a,null))),l.a.createElement(aa.a,{in:f,timeout:"auto",unmountOnExit:!0},l.a.createElement(ea.a,null,"unlocked"===t&&Object.keys(r.data.keys).map((function(e){var t=r.data.keys[e];return l.a.createElement(fa,{key:e,panels:[{title:"".concat(t.tags[0]," ").concat(e.substring(0,8),"..."),children:l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(Ve.a,{variant:"body2"},t.notes),l.a.createElement("br",null),l.a.createElement("div",null,t.tags.map((function(e){return l.a.createElement(la.CopyToClipboard,{key:e,text:e,onCopy:function(){alert("Copied ".concat(e," to clipboard"))}},l.a.createElement(Yt.a,{key:e,label:e,variant:"outlined",style:{margin:"4px"}}))}))),l.a.createElement("br",null),l.a.createElement(la.CopyToClipboard,{text:t.publicKey,onCopy:function(){alert("Copied public key to clipboard")}},l.a.createElement(ft.a,{style:{marginTop:"16px"},fullWidth:!0,variant:"contained"},"Copy Public Key")))}]})}))))))}var ka=a(559),Oa=a(883),wa=a(885),ja=a(884),Ca=a(894),xa=a(895),Sa=function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={password:""},e.handleClose=function(){e.setState({password:""}),e.props.onClose()},e.handleChange=function(t){return function(a){e.setState(Object(P.a)({},t,a.target.value))}},e.handleSubmit=function(t){t.preventDefault(),e.props.doToggleKeystore(e.state.password),e.setState({password:""})},e}return Object(se.a)(a,[{key:"render",value:function(){var e=this.state.password;return l.a.createElement("div",null,l.a.createElement(Oa.a,{open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(xa.a,{id:"form-dialog-title"},"Enter Keystore Password"),l.a.createElement(ja.a,null,l.a.createElement(Ca.a,null,this.props.message),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement(ka.a,{autoFocus:!0,margin:"dense",id:"password",label:"Password",type:"password",value:e,onChange:this.handleChange("password"),fullWidth:!0}))),l.a.createElement(wa.a,null,l.a.createElement(ft.a,{onClick:this.handleClose,color:"primary"},"Cancel"),l.a.createElement(ft.a,{onClick:this.handleSubmit,color:"primary",variant:"contained"},"locked"===this.props.keystoreState?"Unlock":"Lock"," ","Keystore"))))}}]),a}(l.a.Component),Pa=function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(se.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.onChange;return l.a.createElement(kt.a,{mode:"json",theme:"github",style:{width:"100%"},onChange:a,name:"Keystore Editor",value:t,editorProps:{$blockScrolling:!0}})}}]),a}(l.a.Component),Da=function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isSetup:!1,keystore:"{}"},e.handleClose=function(){e.setState({isSetup:!1}),e.props.onClose()},e.handleChange=function(t){return function(a){e.setState(Object(P.a)({},t,a.target.value))}},e.handleSubmit=function(t){t.preventDefault(),e.props.doUpdateKeystore(e.state.keystore),e.props.onClose()},e}return Object(se.a)(a,[{key:"componentDidUpdate",value:function(){if(!this.state.isSetup&&this.props.keystore&&"object"===typeof this.props.keystore.data){var e=JSON.stringify(this.props.keystore.data.keys,null,2);this.state.keystore!==e&&(this.setState({keystore:e}),this.setState({isSetup:!0}))}}},{key:"render",value:function(){var e=this,t=this.state.keystore;return l.a.createElement("div",null,l.a.createElement(Oa.a,{fullScreen:!0,open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(xa.a,{id:"form-dialog-title"},"Edit Keystore"),l.a.createElement(ja.a,null,l.a.createElement(Pa,{value:t,onChange:function(t){e.setState({keystore:t})}})),l.a.createElement(wa.a,null,l.a.createElement(ft.a,{onClick:this.handleClose,color:"primary"},"Cancel"),l.a.createElement(ft.a,{onClick:this.handleSubmit,color:"primary",variant:"contained"},"Save"))))}}]),a}(l.a.Component),Ta=function(e){Object(ue.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isKeystoreLockDialogOpen:!1,isKeystoreEditDialogOpen:!1},e.onOpenKeystoreLockDialog=function(){e.setState({isKeystoreLockDialogOpen:!0})},e.onOpenKeystoreEditDialog=function(){e.setState({isKeystoreEditDialogOpen:!0})},e.doToggleKeystore=function(t){e.setState({isKeystoreLockDialogOpen:!1}),e.props.doToggleKeystore(t)},e}return Object(se.a)(a,[{key:"getKeystoreContext",value:function(e){return e&&null!==e.data?"string"===typeof e.data?{status:"locked",title:"You have encrypted keys",subheader:"You will need to unlock your keys with your password before they can be used. You can export them while they are locked, but not after you unlock them.",passwordPrompt:"Enter the password used when the keystore was created or last locked."}:"object"===typeof e.data?{status:"unlocked",title:"You have keys",subheader:"Your keys are ready for use. If you wish to reuse these keys in another application, you must lock this keystore and then export it.",passwordPrompt:"Enter a password to lock this keystore."}:void 0:{status:"empty",title:"You have no keys",subheader:"If you want to use keys generated by another application use import. If you want to generate a keystore for the first time, click create.",passwordPrompt:""}}},{key:"render",value:function(){var e=this,t=this.props,a=t.doImportKeystore,n=t.doDeleteKeystore,r=t.doCreateWalletKeystore,o=t.doUpdateKeystore,i=this.props.keystore.keystore,c=this.getKeystoreContext(i),s=c.status,u=c.title,d=c.subheader,p=c.passwordPrompt,m=this.state,f=m.isKeystoreLockDialogOpen,y=m.isKeystoreEditDialogOpen;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ea,{status:s,title:u,subheader:d,keystore:i,doImportKeystore:a,doDeleteKeystore:n,doCreateWalletKeystore:r,onOpenKeystoreLockDialog:this.onOpenKeystoreLockDialog,onOpenKeystoreEditDialog:this.onOpenKeystoreEditDialog}),l.a.createElement(Sa,{message:p,open:f,keystoreState:s,doToggleKeystore:this.doToggleKeystore,onClose:function(){e.setState({isKeystoreLockDialogOpen:!1})}}),l.a.createElement(Da,{open:y,keystore:i,doUpdateKeystore:o,onClose:function(){e.setState({isKeystoreEditDialogOpen:!1})}}))}}]),a}(l.a.Component),Ka=function(e){return l.a.createElement(dt,e,l.a.createElement(Ta,e))},Wa=Object(b.compose)(re.container,_.container)((function(e){return l.a.createElement(Ka,e)})),Na=a(604),Aa=a.n(Na);var Ra=function(e){var t=e.message;return l.a.createElement("div",{style:{alignItems:"center",display:"flex",flex:1,height:"100%",justifyContent:"center",flexDirection:"column"}},l.a.createElement("img",{alt:"loading...",src:Aa.a,style:{filter:"brightness(25%) sepia(1) hue-rotate(-150deg)",marginBottom:"32px"}}),l.a.createElement(Ve.a,{paragraph:!0},t||"Loading..."))},Fa=window,La=Fa.WebCredentialHandler,Ia=Fa.credentialHandlerPolyfill,za=function(e){var t=l.a.useState({}),a=Object(Be.a)(t,2),n=a[0],r=a[1];return l.a.useEffect((function(){var t=function(){var t=Object(I.a)(L.a.mark((function t(){var a,o,i,l;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.chapi.wallet.isLoaded||e.loadWalletContents(),t.next=3,La.receiveCredentialEvent();case 3:a=t.sent,console.log("Store Credential Event:",JSON.stringify(a,null,2)),o=a.credential,i=o.data,l=i.verifiableCredential?Array.isArray(i.verifiableCredential)?i.verifiableCredential[0]:i.verifiableCredential:i,r(Object(h.a)(Object(h.a)({},n),{},{event:a,credential:o,vc:l}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Ia.loadOnce().then(t)}),[]),n.credential?l.a.createElement(ge,null,l.a.createElement("div",{style:{height:"100%",padding:"8px"}},l.a.createElement(Ve.a,{style:{marginBottom:"8px",marginTop:"4px"}},"Are you sure you wish to store this credential?"),l.a.createElement(Lt,{verifiableCredential:n.vc}),l.a.createElement("div",{style:{marginTop:"32px"}},l.a.createElement(ft.a,{onClick:function(){n.event.respondWith(new Promise((function(e){return e({dataType:"Response",data:"canceled"})})))}},"Cancel"),l.a.createElement(ft.a,{style:{float:"right"},variant:"contained",color:"primary",onClick:function(){e.storeInWallet(n.credential.data),n.event.respondWith(new Promise((function(e){return e({dataType:"Response",data:"result"})})))}},"Confirm")))):l.a.createElement(Ra,{message:"Loading credential..."})},Ma=Object(b.compose)($.container,re.container)((function(e){return l.a.createElement(za,e)})),Ba=window,qa=Ba.WebCredentialHandler,Ja=Ba.credentialHandlerPolyfill,Ha=function(){var e,t=localStorage.getItem("holder");switch(t||(t="did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd",localStorage.setItem("holder",t)),t){case"did:web:vc.transmute.world":e="did:web:vc.transmute.world#z6MksHh7qHWvybLg5QTPPdG2DgEjjduBDArV9EF9mRiRzMBN";break;case"did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd":e="did:key:z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd#z6MkjRagNiMu91DduvCvgEsqLZDVzrJzFrwahc4tXLt9DoHd";break;case"did:elem:ropsten:EiBJJPdo-ONF0jxqt8mZYEj9Z7FbdC87m2xvN0_HAbcoEg":e="did:elem:ropsten:EiBJJPdo-ONF0jxqt8mZYEj9Z7FbdC87m2xvN0_HAbcoEg#xqc3gS1gz1vch7R3RvNebWMjLvBOY-n_14feCYRPsUo";break;default:throw new Error("unsupported demo holder.")}return{holder:t,verificationMethod:e}},Va=function(e){var t=e.credentialRequestOptions.web.VerifiablePresentation,a=t.challenge,n=t.domain,r=t.query;return r.challenge&&(a=r.challenge),r.domain&&(n=r.domain),n||(n=e.credentialRequestOrigin.split("//").pop()),{domain:n,challenge:a}},_a=function(e){var t=l.a.useState({event:{},query:{}}),a=Object(Be.a)(t,2),n=a[0],r=a[1];return l.a.useEffect((function(){Ja.loadOnce().then((function(){e.chapi.wallet.isLoaded||e.loadWalletContents()}))}),[]),l.a.useEffect((function(){function t(){return(t=Object(I.a)(L.a.mark((function t(){var a,o,i,l,c,s,u,d,p,m,f;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qa.receiveCredentialEvent();case 2:if(a=t.sent,console.log("Wallet processing get() event:",a),o=a.credentialRequestOptions.web.VerifiablePresentation,"DIDAuth"!==(i=Array.isArray(o.query)?o.query[0]:o.query).type){t.next=17;break}return"https://vchttpapi.essif.adaptivespace.io/v0.1.0/prove/presentations",l=Ha(),c=l.holder,s=l.verificationMethod,u=Va(a),d=u.domain,p=u.challenge,t.next=12,fetch("https://vchttpapi.essif.adaptivespace.io/v0.1.0/prove/presentations",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({presentation:{"@context":"https://www.w3.org/2018/credentials/v1",type:"VerifiablePresentation",holder:c},options:{proofPurpose:"authentication",domain:d,challenge:p,verificationMethod:s}})});case 12:return m=t.sent,t.next=15,m.json();case 15:f=t.sent,e.storeInWallet(f);case 17:r(Object(h.a)(Object(h.a)({},n),{},{event:a,query:i}));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Ja.loadOnce().then((function(){return t.apply(this,arguments)}))}),[]),l.a.createElement(ge,null,l.a.createElement("div",{style:{height:"100%",padding:"8px"}},l.a.createElement(Ve.a,{style:{marginBottom:"8px",marginTop:"4px"}},n.event.credentialRequestOrigin," has requested a ",n.query.type,"."),l.a.createElement(qt,{credentialRequestOptions:n.event.credentialRequestOptions,walletRows:e.walletObjectToArray(e.chapi.wallet.object),onShare:function(){var e=Object(I.a)(L.a.mark((function e(t){var a,r,o,i,l,c,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,r=Ha(),o=r.holder,i=r.verificationMethod,"VerifiablePresentation"!==t.type&&(a={"@context":["https://www.w3.org/2018/credentials/v1","https://www.w3.org/2018/credentials/examples/v1"],holder:o,type:"VerifiablePresentation",verifiableCredential:[t]}),a.proof){e.next=12;break}return"https://vchttpapi.essif.adaptivespace.io/v0.1.0/prove/presentations",l=Va(n.event),c=l.domain,s=l.challenge,e.next=8,fetch("https://vchttpapi.essif.adaptivespace.io/v0.1.0/prove/presentations",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({presentation:a,options:{proofPurpose:"authentication",domain:c,challenge:s,verificationMethod:i}})});case 8:return u=e.sent,e.next=11,u.json();case 11:a=e.sent;case 12:n.event.respondWith(Promise.resolve({dataType:"VerifiablePresentation",data:a}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})))},Za=[{path:"/",exact:!0,component:Ut},{path:"/chapi/wallet/store",exact:!0,component:Ma},{path:"/chapi/wallet/get",exact:!0,component:Object(b.compose)($.container,re.container)((function(e){return l.a.createElement(_a,e)}))},{path:"/keystore",exact:!0,component:Wa}],Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={key:"root",whitelist:["keystore"],storage:k.a},a=[w.a,Object(v.a)(S)];var n=Object(b.createStore)(Object(g.a)(t,Object(b.combineReducers)(Object(h.a)(Object(h.a)({},oe),e))),Object(O.composeWithDevTools)(Object(b.compose)(b.applyMiddleware.apply(void 0,a),C.a))),r=Object(g.b)(n);return{store:n,persistor:r,history:S}}(),Ga=Ua.store,Ya=Ua.persistor,Xa=Ua.history;s.a.render(l.a.createElement(p.a,{store:Ga},l.a.createElement(m.PersistGate,{persistor:Ya},l.a.createElement(d.a,{history:Xa},l.a.createElement(u.c,null,Za.map((function(e){var t=e.exact,a=e.path,n=e.component;return l.a.createElement(u.a,{key:a,exact:t,path:a,component:n})})))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");f?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):y(t,e)}))}}()}},[[620,1,2]]]);
//# sourceMappingURL=main.9a7c51da.chunk.js.map